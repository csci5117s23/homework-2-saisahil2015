"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.injectSSRStateIntoObject = exports.injectSSRStateIntoProps = void 0;
/**
 * @param callbackResult The results from the wrapped (user-provided) getServerSideProps callback.
 * @param authData
 */
function injectSSRStateIntoProps(callbackResult, authData) {
    return {
        ...callbackResult,
        props: (0, exports.injectSSRStateIntoObject)(callbackResult.props, authData),
    };
}
exports.injectSSRStateIntoProps = injectSSRStateIntoProps;
const injectSSRStateIntoObject = (obj, authData) => {
    // Serializing the state on dev env is a temp workaround for the following issue:
    // https://github.com/vercel/next.js/discussions/11209|Next.js
    const __clerk_ssr_state = process.env.NODE_ENV !== 'production' ? JSON.parse(JSON.stringify({ ...authData })) : { ...authData };
    return { ...obj, __clerk_ssr_state };
};
exports.injectSSRStateIntoObject = injectSSRStateIntoObject;
