"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.withAuth = void 0;
const clerk_sdk_node_1 = require("@clerk/clerk-sdk-node");
const server_1 = require("../server");
const utils_1 = require("./utils");
function withAuth(handler, options) {
    return async (req, res) => {
        await (0, utils_1.runMiddleware)(req, res, (0, clerk_sdk_node_1.createClerkExpressWithAuth)({
            clerkClient: server_1.clerkClient,
            frontendApi: server_1.FRONTEND_API,
            apiUrl: server_1.API_URL,
            publishableKey: server_1.PUBLISHABLE_KEY,
        })(options));
        return handler(req, res);
    };
}
exports.withAuth = withAuth;
